\section{Der getypte $\lambda$-Kalkül als Metasprache \tiny (Vorlesung 9 am 26.06.)}
% höhe von Grundlage
%\marginnote{\small\emph{()}}[0,5cm]
% Def. Menge A_\lambda der getypten...
\marginnote{\small typfrei: Sei $\mathcal{X}$ als unendl. Menge \\ (i) $x \in \mathcal{X}$ ist $\lambda$-Ausdruck (Atom) \\ (ii) ($t_1\ t_2$) ist $\lambda$-Ausdruck (Applikation) \\ (iii) ($\lambda x.t$) ist $\lambda$-Ausdruck (Abstraktion)}[6cm]
\begin{compactitem}
\item[-] Semantische Bereiche, \lstinline!cpo!'s
\item[-] Bezeichnung für Elemente aus Ausgangsbereichen, kartesische Produkte, Folgen, Summenbereichen ist die vertraute mathematische Notation. Für Elemente aus Funktionenbereichen (-domains) bietet sich der $\lambda$ -Kalkül von Alonso Church (1936) an.\\
Bisher: $f:D_1 \rightarrow D_2$ wurde definiert durch $d \rightarrow t$, wobei in $t$ sowohl der formale Parameter $d$ als auch bekannte Elemente vorkommen können.\\
Problematisch für Funktionen höheren Typs.
\end{compactitem}
\subsection{Definition: Menge $A_{\lambda}$ der getypten $\lambda$ -Ausdrücke}
Sei $\mathcal{X} = \{ \mathcal{X}^D | D \in \mathcal{D}$, $\mathcal{D} \}$ Familie von \lstinline!cpo!'s, die Ausgangsbereiche enthält und abgeschlossen ist unter: $x, ^* , ^w , + und \rightarrow$.
\begin{compactitem}
\item[1.] \begin{align*}
x &: D \in \mathcal{A}_\lambda \text{ für alle } x \in \mathcal{X}^D \tag{Atome, Variable}\\
k &: D \in \mathcal{A}_\lambda \text{ für alle } k \in \mathcal{K}^D \text{, wobei } \\ 
\mathcal{K} &= \{ \mathcal{K}^D | D \in D \}, &\text{die diskrete Elemente, sowie Projektionsfunktion,} \\
&& \text{Listenoperationen, } \underline{fix}, \underline{curry}, \dots \\
\end{align*}
\item[2.] \begin{align*}
<t_1, \dots , t_r> : D_1 \times \dots \times D_r \in \mathcal{A}_\lambda \text{ für alle } t_i : D_i \in \mathcal{A}_\lambda, 1 \leq i \leq r \tag{Tupel}\\
\end{align*}
\item[3.] \begin{align*}
(t_1 t_2) : D \in \mathcal{A}_\lambda \text{, falls } t_1 : D' \rightarrow D \in \mathcal{A}_\lambda und t_2 : D' \in \mathcal{A}_\lambda \tag{Applilation} \\
\end{align*}
\item[4.a)] \begin{align*}
(\lambda x.t) : D_1 \rightarrow D_2 \in \mathcal{A}_\lambda \text{, für alle } x \in \mathcal{X}^{D_1} und t:D_2 \in \mathcal{A}_\lambda  \tag{monadisch}\\
\end{align*}
\item[4.b)] \begin{align*}
(\lambda (x_1, \dots , x_r).t) : D_1 \times \dots \times D_i \rightarrow D \text{, für } x_i \in \mathcal{X}^{D_i}, t:D \in \mathcal{A}_\lambda, 1 \leq  i \leq r\tag{polyadisch}\\
\end{align*}
\end{compactitem}
\subsection{Konventionen (Verbesserung der Lesbarkeit)}
\begin{compactitem}
\item[-] Applikation ist links assoziativ, d.h. $f \; a_1 \; a_2$ steht für $(\dots((f\;a_1)a_2)\dots a_n)$
\item[-] Abstraktion erstreckt sich soweit nach rechts wie möglich, d.h. $\lambda x.t_1 \; t_2 \dots t_r$ steht für $(\lambda x.t_1 \; t_2 \dots t_r)$ und $t_0 (\lambda x.t_1 \; t_2 \dots t_r) t_{r+1}$ steht für $(t_0 (\lambda x. t_1 \; t_2 \dots t_r) ) t_{r+1}$
\item[-] Applikation mit rechtsassoziativer Bindung notiert durch ";\", d.h. $t_1 \dots t_r; s_1 \dots s_n; u_1 \dots u_m$ steht für $(t_1 \dots t_r) ((s_1 \dots s_n)( u_1 \dots u_m))$
\item[-] Mehrfachabstratktionen der Form $\lambda x_1.\lambda x_2 \dots \lambda x_r.t$ wird abgekürzt durch $\lambda x_1 \dots x_r . t$
\item[-] Die bekannten zweistelligen arithm. u. log. Operatoren werden Infix notiert und binden schwächer als die Applikation, d.h. $\lambda x. 2 + f x$ steht für $(\lambda x.((\underline{plus} 2)(f x)))$
\item[-] Verzicht auf Typenangabe, wenn aus Kontext ersichtlich!
\end{compactitem}

\subsubsection*{Beispiel} 
Für die Verwendung getypter $\lambda$-Ausdruck zur Definition von Elementen aus funktionalen \lstinline!cpo!'s.\\
\textbf{Verbal} Gewicht $f$, welches angewendet auf eine Liste von Zahlen, eine zweistellige arithm. Operation $g$ und eine Zahl $z$ den Wert von $g$ angewendet auf die dritte Komponente von $L$ und $z$ liefert.
\begin{align*}
f:=\lambda L\; g \;z . g (\pi_3 L) z \text{ mit } g : \mathbb{Z}_perp \rightarrow \mathbb{Z}_perp \rightarrow \mathbb{Z}_perp, L : D^* \text{oder} L : \mathbb{Z}^*_perp, z : \mathbb{Z}_perp\\
f : \mathbb{Z}_perp^* \rightarrow [\mathbb{Z}_perp \rightarrow \mathbb{Z}_perp \rightarrow \mathbb{Z}_perp] \rightarrow \mathbb{Z}_perp \rightarrow \mathbb{Z}_perp
\end{align*}
gegeben folgenden Argumente $f <4, 7, \underline{hd}<3>, 8, 2> \underline{plus} 5 : \mathbb{Z}_perp $ \\
Rechnen durch Ersetzung von formalen Parametern durch akt. Argumente
\begin{align*}
f <4, 7, \underline{hd}<3>, 8, 2> \underline{plus} 5 &\rightarrow \underline{plus} (\pi_3 <\dots>) 5 \\
&\rightarrow \underline{plus} (\underline{hd}<3>) 5 \\
&\rightarrow \underline{plus} 3 5 \\
& \rightarrow 8\\
\end{align*}
\subsection{Formale Semantik der Metasprache:}
\begin{align*}
[\![ \; ]\!] &: \mathcal{A}_\lambda \rightarrow [\mathcal{U} \rightarrow \mathcal{D}] \text{, wobei } \mathcal{U}:\mathcal{X} \rightarrow \mathcal{D} \text{ typhaltende Funktion.}\\
[\![ x ]\!] \rho &= \rho x \\
[\![ k ]\!] \rho &= k \tag{1}\\
\\
[\![ <t_1, \dots, t_n> ]\!] \rho &= <[\![ t_1 ]\!]\rho, \dots , [\![ t_n ]\!] \rho > \tag{2}\\
\\
[\![ t_1 \; t_2 ]\!] \rho &= [\![ 2_1 ]\!] \rho ([\![ t_2 ]\!] \rho)  \tag{3}\\
\\
[\![\lambda x.t ]\!] \rho &= d \rightarrow [\![ t ]\!] s [d/x] \tag{4a}\\
[\![ \lambda (x_1,\dots, x_r).t ]\!] \rho &= <d_1, \dots , d_r> \\
&\rightarrow [\![ t ]\!] \rho [d_1 \dots d_r / x_1 \dots x_i], x_i \neq x_j \text{ für alle } i \neq j \tag{4b}\\
\end{align*}

\subsection{$\lambda$-Kalkül (Semantische Reduktionsregeln)}
$\text{\lstinline!Fr!} : \mathcal{A}_\lambda \rightarrow \mathcal{X}, \text{\lstinline!Geb!}: \mathcal{A}_\lambda \rightarrow \mathcal{X}, \text{\lstinline!Var!} : \mathcal{A}_\lambda \rightarrow \mathcal{X}$ 
\begin{align*}
&\xrightarrow{\alpha} \text{ Variablenumbenennung } \lambda x.t \xrightarrow{\alpha} \lambda y. \$^x_y t \text{, wobei } \$ \text{ Substitutionsoperator}\\
&\xrightarrow{\beta}	\text{ Ersetzung formaler Parameter } (\lambda x.t) a \xrightarrow{\beta}	\$^x_a t \text{, falls } \text{\lstinline!Fr!}(a) \text{\lstinline!Geb!}(t) = \varnothing\\
&\xrightarrow{\gamma} \text{ Wertreduktion, } \underline{plus}\ 4\; 3 \xrightarrow{\gamma} 7 \\
&\text{Extensionalität: } \lambda x.(t\;x) \xrightarrow{\eta} t, x \notin \text{\lstinline!Fr!}(t)\\ 
\end{align*}