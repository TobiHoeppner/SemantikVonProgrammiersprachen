\section{Mathematische Grundlagen \\ zur Konstruktion sematischer Bereiche \tiny (Vorlesung 7 am 12.06.)}
% höhe von Grundlage
%\marginnote{\small\emph{()}}[0,5cm]
% höhe Allgemeine Methode 1.)
%\marginnote{\small\emph{()}}[3cm]
\subsection{Den. Semantik}
\begin{compactitem}
	\item[\textbf{Den. Semantik:}] Zuordnung von mathematischen Objekten zu syntaktischen Konstrukten.
	\item[\textbf{Problem:}] Rekursion. (Wdh.: Wir erklären eine Funktion (Zustand $\rightarrow$ Zustand $\cup$ Fehler)...
	\begin{align*}
			\mathcal{C}
[\![\underline{while}\;B\;\underline{do}\;C]\!]\;(s,e,a) &= \left\lbrace\begin{array}{l l} \mathcal{C}
[\![C;\underline{while}\;B\;\underline{do}\;C]\!](s,e',a)\text{,}\quad\text{falls }&\mathcal{B}
[\![B]\!]\;s\;e = (\underline{true}, e')\\
		(s,e',a)\text{,}\quad\text{falls }&\mathcal{B}
[\![B]\!]\;s\;e = (\underline{false}, e')\\
		\underline{\text{Fehler}}\text{,}\quad\text{sonst} \end{array}\right.\\
	\end{align*}
	\item[\textbf{Frage:}] Gibt es eine eindeutige Lösung solcher Rekursionsgleichungen?
	\item[\textbf{Antwort:}] I.A. nein.
	\item[\textbf{Beispiele:}] (von leicht zu schwer)
	\begin{align*}
	f(x) = f(x) + 1 &\quad\text{Keine Lösung im Bereich der totalen Funktionen } \mathrm{N}\rightarrow \mathrm{N}\text{.}\\
	&\quad\text{Eine Lösung im Bereich der partiellen Fuktionen } \mathrm{N}\rightarrow \mathrm{N}\\
	&\quad f(x)\text{ ist undefiniert für alle } x \in \mathrm{N}.\\\tag{Beispiel 1}\\
	\end{align*}
	\begin{align*}
	f(x) = 
	\left\lbrace\begin{array}{l l}
	&\text{Drei Lösungen über partiellen Funktionen } \mathrm{N} \rightarrow \mathrm{N}:\\
	0\text{,} \quad\text{falls} f(x)=0 &\text{ a) } n \mapsto 0\\
	1\text{,} \quad\text{falls} f(x)\neq0 &\text{ b) } n \mapsto 1\\
	&\text{ c) } f(n) \text{ ist nicht definiert für alle } n \in \mathrm{N}\\
	\end{array}\right.\\\tag{Beispiel 2}\\
	\end{align*}
	\begin{align*}
	f(x) = 
	\left\lbrace\begin{array}{l l}
	&\text{Lösungen im Breich der}\\
	&\text{partiellen Funktionen } \mathrm{N} \times \mathrm{N} \rightarrow \mathrm{N}:\\
	y\text{,} \quad\text{falls} f(x)=0 &\text{a) } (x,y) \mapsto
		\left\lbrace\begin{array}{l l}
		y\text{,} \quad\text{falls } x=0\\
		\text{undefiniert sonst}\\ 
		\end{array}\right.\\
	f(f(x,y-1), f(x-1,y)) &\text{b) } (x,y) \rightarrow y\\
	\text{, sonst} f(x)\neq 0 &\text{c) } (x,y) \mapsto \max(x,y)\\
	&\text{d) } (x,y) \mapsto 
		\left\lbrace\begin{array}{l l}
		y\text{,} \quad\text{falls } x=0\\
		k\text{,} \quad\text{sonst für } k \in \mathrm{N}_+ \text{ bel.}\\ 
		\end{array}\right.\\
	\end{array}\right.\\\tag{Beispiel 3}\\
	\end{align*}
	\begin{align*}
	\text{Sei }\;g: \mathrm{N} &\rightarrow \mathrm{N} \text{ eine idempotente Funktion mit} g(x) \neq 0 \text{, d.h.}\\
	g(g x) &= g \; x \text{, dann ist}\\
	(x,y) &\mapsto 
		\left\lbrace\begin{array}{l l}
		y\text{,} \quad\text{falls } x=0\\
		g(x)\text{,} \quad\text{sonst }\\ 
		\end{array}\right. \\\tag{eine Lösung zu Beispiel 3}\\
	\end{align*}
\end{compactitem}

\subsection{Konsequenz}
Konstruiere semantische Bereiche so, dass zu jeder rekursiven Gleichung eine \emph{eindeutige Lösung} zugeordnet werden kann.\\
\textbf{Idee:} 
\begin{compactitem}
	\item[-] Betrachte totale Funktion über Bereichen, in denen ein Element undefiniert ($\perp$) hinzugefügt ist.
	\item[-] Betrachte eine Approximationsrelation $\sqsubseteq$(weniger definiert als), um unendliche Objekte durch endliche zu approximieren.
	\item[\textbf{Beispiel}]
	\begin{align*}
		\text{Part. Fkt. } \mathrm{N}\rightarrow \mathrm{N}\text{ mit } f \sqsubseteq g \text{ gdw } Graph(f) \leq Graph(g)\\
		\text{doppelt } x = 2 * x \text{ wird approximiert von}\\
		f_{\mathcal{v}}(x)
		\left\lbrace\begin{array}{l l}
		2*x\text{,} \quad\text{falls } x<\mathcal{v}\\
		\text{undefiniert sonst, } \mathcal{v} \in \mathrm{N}\\ 
		\end{array}\right.\\
	\end{align*}
\end{compactitem}
\subsection{Defintion Semantischer Bereich, CPO}
% höhe von Defintion
\marginnote{\small\emph{cpo - complete partial order}}[0cm]
Eine Struktur $\underline{A}=(A,\sqsubseteq_A)$ heißt semantischer Bereich (cpo), wenn 1-3 gilt:
\begin{compactitem}
	\item[\textbf{1.}] $\sqsubseteq_A$ ist eine Halbordnung auf A (reflexiv, transitiv, antisymmetrisch)
	\item[\textbf{2.}] Es gibt bezüglich $\sqsubseteq_A$ ein minimales Element $\perp_A$ in $A$, d.h. $\perp_A \sqsubseteq a$, für alle $a \in A$
	\item[\textbf{3.}] Zu jeder Kette $K \leq A$ existiert eine kleinste obere Schranke $\sqcup K$ in A, wobei $K$ Kette ist, wenn zu je zwei $k_1, k_2 \in K$ gilt: $k_1\sqsubseteq_A k_2$ oder $k_2 \sqsubseteq_A k_1$.
\subsubsection*{Beispiel}
\begin{align*}
(\mathrm{N}, \leq)\text{ ist cpo? Nein! 1. } \checkmark \text{ 2. } 0 = \perp_\mathrm{N}\checkmark \text{3. } \{x | x \text{ ist gerade}\} \text{ist Kette in } \mathrm{N}\text{ hat in } \mathrm{N}\text{ keine kleinste obere Schranke!} \times\\
\end{align*}
\subsection{Defintionen (monton, stetig, strikt, [$\rightarrow$])}
Seien $A$ und $B$ cpo's. 
\begin{compactitem}
	\item Eine Funktion $f: A \rightarrow B$ heißt \textbf{monton}, wenn $f(a_1) \sqsubseteq_A f(a_2)$ für alle $a_1 \sqsubseteq a_2 \in A$
	\item Eine Funktion $f: A \rightarrow B$ heißt \textbf{stetig}, wenn $f(K)$ eine Kette in $B$ ist und $f(\sqcup K) = \sqcup f(K)$ für alle $K \subseteq A$ mit $K$ ist Kette in $A$.
	\item Eine Funktion $f: A \rightarrow B$ heißt \textbf{strikt}, wenn $f(\perp_A) = \perp_B$
	\item $[A\rightarrow B]$ bezeichnet den Raum aller stetigen Funktionen von $A \rightarrow B$.
	\item[\textbf{1. Lemma}] ($[A\rightarrow B], \sqsubseteq$) ist cpo mit punktweiser Ordnung, d.h. $f \sqsubseteq g$, wenn $f (a) \sqsubseteq_B g(a)$ für alle $a \in A$
	\item[\textbf{2. Lemma}] Aus $f$ ist stetig folgt $f$ ist monoton.
	\item[\textbf{Beweis:}] Sei
	\begin{align*}
	&f: A \rightarrow B \text{ stetig und } a_1 \sqsubseteq_A a_2 \in A\\
	&f(a_1) \sqsubseteq \sqcup\{f(a_1), f(a_2) \} = \sqcup f(\{a_1, a_2\}) = f (\sqcup\{a_1, a_2\}) = f(a_2) \checkmark\\
	\end{align*}
\end{compactitem}
\subsection{Satz: minimaler Fixpunkt (Tarski 1955)}
Sei
\begin{align*}
f: A \rightarrow A \text{ eine stetige Funktion} \\ 
\text{Es existiert ein minimaler Fixpunkt}\\
\underline{fix} f \text{ in } A \text { und es gilt}\\
\underline{fix} f = \sqcup_{\mathcal{v} \in \mathrm{N}} f^\mathcal{v}(\perp)\\
\end{align*}
Nachtrag: Sei $D$ ein cpo und $f:D \rightarrow D$ eine stetige Funktion. Es existiert in $D$ der minimale Fixpunkt, $\underline{fix} f$, von $f$ in $D$.\\
Es gilt $\underline{fix}\ f = \bigsqcup_{\mu \in \mathbb{N}} f^\mu (\perp)$.\\
% höhe von 1. im Beweis
\marginnote{\small Nebenbemerkung: $\{ f^\mu (\perp) | \mu \on \mathbb{N}\}$ ist Kette in $D$. \\ Begründung: $\perp, f(\perp), f^2(\perp),\dots, \perp \sqsubseteq f(\perp),f(\perp) \sqsubseteq f^2(\perp),f^2(\perp) \sqsubseteq f^3(\perp), \dots$ Minimalität von $\perp$}[0,5cm]
Beweis:\\
\begin{align*}
\text{1.)} f(\bigsqcup_{\mu \in \mathbb{N}} f^\mu (\perp)) &= \bigsqcup_{\mu \in \mathbb{N}} f^{\mu +1 }(\perp) \text{wg. Stetigkeit}\\
&= \bigsqcup_{\mu \in \mathbb{N}} f^{\mu}(\perp)\\
\text{Also ist} \bigsqcup_{\mu \in \mathbb{N}} f^{\mu}(\perp) \text{ ein Fixpunkt von } f.\\
\\
\text{2.) (Minimalität) Sei} p \in D \text{ mit } f(p) = P\\
\perp  &\sqsubseteq p \quad \text{Minimalität von } \perp \\
f(\perp)  &\sqsubseteq f(p) \quad \text{Lemma: Stetigkeit } \Rightarrow \text{Monotonie}\\
f(\perp)  &\sqsubseteq f(p) \quad \text{für alle } \mu \in \mathbb{N}\\
\bigsqcup_{\mu \in \mathbb{N}} f^\mu (\perp)  &\sqsubseteq p \quad \checkmark \qed \\
\end{align*}
\textbf{Ausblick:} Rekursive Gleichungen können als Transformation von stetigen Funktionen betrachtet werden. \emph{Fixpunkt dieser Transformation ist eindeutige Lösung.}
\subsection{Graphische Illustration von cpo's}
\begin{itemize}
	\item Elemente des Trägers sind Knoten
	\item $\sqsubseteq$ wird durch aufwärts gerichtete Kanten dargestellt
\end{itemize}
% siehe FOTO1!
$\mathrm{N}$
\begin{tikzpicture}[-,>=stealth',shorten >=1pt,auto,node distance=1cm,
  thick,main node/.style={font=\sffamily\Large\bfseries}]
  \node[main node] (2) [below of=1] {$\vdots$};
  \node[main node] (3) [below of=2] {$2$};
  \node[main node] (4) [below of=3] {$1$};
  \node[main node] (5) [below of=4] {$0$};
    \path[every node/.style={font=\sffamily\small}]
    (2) edge node {} (3)
    (3) edge node {} (4)
    (4) edge node {} (5);
\end{tikzpicture}
$\mathrm{N} \cup \{\infty\}$
\begin{tikzpicture}[-,>=stealth',shorten >=1pt,auto,node distance=1cm,
  thick,main node/.style={font=\sffamily\Large\bfseries}]
  \node[main node] (1) {$\infty$};
  \node[main node] (2) [below of=1] {$\vdots$};
  \node[main node] (3) [below of=2] {$2$};
  \node[main node] (4) [below of=3] {$1$};
  \node[main node] (5) [below of=4] {$0$};
    \path[every node/.style={font=\sffamily\small}]
    (1) edge node {} (2)
    (2) edge node {} (3)
    (3) edge node {} (4)
    (4) edge node {} (5)
    (1) edge [bend right=60] node {} (5)
    (1) edge [bend right=40] node {} (4)
    (1) edge [bend right=20] node {} (3);
\end{tikzpicture}
\begin{tikzpicture}[-,>=stealth',shorten >=1pt,auto,node distance=1cm,
  thick,main node/.style={font=\sffamily\Large\bfseries}]
  \node[main node] (1) {$\infty$};
  \node[main node] (2) [below of=1] {$\vdots$};
  \node[main node] (3) [below of=2] {$4$};
  \node[main node] (4) [below of=3] {$2$};
  \node[main node] (5) [below of=4] {$0$};
    \path[every node/.style={font=\sffamily\small}]
    (1) edge [bend right=60] node {} (5)
    (1) edge [bend right=40] node {} (4)
    (1) edge [bend right=20] node {} (3);
\end{tikzpicture}

Beispiel für cpo. Teilmengen von endlichen Mengen ($\mathcal{P} \{a,b,c\}, \subseteq$)\\
% siehe FOTO2!
\begin{tikzpicture}[-,>=stealth',shorten >=1pt,auto,node distance=2cm,
  thick,main node/.style={font=\sffamily\Large\bfseries}]
  \node[main node] (1) {$\{a,b,c\}$};
  \node[main node] (3) [below of=1] {$\{a,c\}$};
  \node[main node] (2) [left of=3] {$\{a,b\}$};
  \node[main node] (4) [right of=3] {$\{b,c\}$};
  \node[main node] (5) [below of=3] {$\{b\}$};
  \node[main node] (7) [left of=5] {$\{a\}$};
  \node[main node] (8) [right of=5] {$\{c\}$};
  \node[main node] (6) [below of=5] {$\varnothing$};
  \path[every node/.style={font=\sffamily\small}]
    (1) edge node {} (2)
    (1) edge node {} (3)
    (1) edge node {} (4)
    (2) edge node {} (7)
    (2) edge node {} (5)
    (3) edge node {} (7)
    (3) edge node {} (8)
    (4) edge node {} (5)
    (4) edge node {} (8)
    (5) edge node {} (6)
    (7) edge node {} (6)
    (8) edge node {} (6);
\end{tikzpicture}
\end{compactitem}
